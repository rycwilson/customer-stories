#prospect.tab-pane {
  class=('active' if workflow_stage == 'prospect')
  data-dashboard-target="tabPanel"
  data-action=[ \
    'customer-wins:loading->dashboard#onResourceLoading',
    'customer-wins:ready->dashboard#onResourceReady',
    'contributions:loading->dashboard#onResourceLoading',
    'contributions:ready->dashboard#onResourceReady'].join(' ')
  role="tabpanel" }

  = render('shared/loading_spinner')

  .container-fluid
    .sidebar--sans-text
      ul.nav data-controller="nav-list" role="tablist"
        li class=('active' if active_tab == '#customer-wins')
          a {
            id="customer-wins-tab" 
            href="#customer-wins" 
            data-toggle="tab"
            data-dashboard-target="customerWinsTab"
            data-nav-list-target="tab"
            data-action="dashboard#setNavCookie"
            data-controller="tooltip"
            data-tooltip-options-value=nav_link_tooltip_options('Customer Wins').to_json
            aria-controls="customer-wins"
            aria-expanded="#{active_tab == '#customer-wins' ? 'true' : 'false'}"
            role="tab" }
            i.fa.fa-fw.fa-rocket
            
        li class=('active' if active_tab == '#contributions')
          a {
            id="contributions-tab" 
            href="#contributions" 
            data-toggle="tab"
            data-dashboard-target="contributionsTab"
            data-nav-list-target="tab"
            data-action="dashboard#setNavCookie"
            data-controller="tooltip"
            data-tooltip-options-value=nav_link_tooltip_options('Contributors').to_json
            aria-controls="contributions"
            aria-expanded="#{active_tab == '#contributions' ? 'true' : 'false'}"
            role="tab" }
            i.fa.fa-fw.fa-users

    .layout-main
      .tab-content
      
        = content_tag( \
            :div,
            id: 'customer-wins',
            class: "tab-pane resource-ctrl #{'active' if active_tab == '#customer-wins'}",
            aria_labelledby: 'customer-wins-tab',
            role: 'tabpanel', 
            data: { \
              dashboard_target: 'customerWins',
              resource_name: 'customerWins',
              controller: 'customer-wins',
              customer_wins_dashboard_outlet: '.dashboard',
              customer_wins_table_nav_outlet: '.customer-wins__table-nav',
              customer_wins_data_path_value: '/successes',
              customer_wins_row_group_data_source_value: @row_group_data_source[:customer_wins],
              customer_wins_filters_value: customer_wins_filters(curator&.id),
              customer_wins_display_options_html_value: \
                customer_wins_display_options_html(company),
              action: [ \
                'datatable:info-cloned->customer-wins#onTableInfoCloned',
                'datatable:paginate-cloned->customer-wins#onTablePaginateCloned',
                'customer-win:row-clicked->customer-wins#openRowView',
                'datatable:row-deleted->customer-wins#onRowDeleted',
                'table-nav:step-row-view->customer-wins#stepRowView'].join(' ') }) do

          = render('successes/table', company:)

        = content_tag( \
            :div,
            id: 'contributions',
            class: "tab-pane resource-ctrl #{'active' if active_tab == '#contributions'}",
            aria_labelledby: 'contributions-tab',
            role: 'tabpanel',
            data: { \
              dashboard_target: 'contributions',
              resource_name: 'contributions',
              controller: 'contributions',
              contributions_dashboard_outlet: '.dashboard',
              contributions_table_nav_outlet: '.contributions__table-nav',
              contributions_data_path_value: company_contributions_path(company),
              contributions_row_group_data_source_value: @row_group_data_source[:contributions],
              contributions_filters_value: contributions_filters(curator&.id),
              contributions_display_options_html_value: \
                contributions_display_options_html(company),
              contributions_invitation_template_select_html_value: \
                invitation_template_select_html(company),
              action: [ \
                'datatable:info-cloned->contributions#onTableInfoCloned',
                'datatable:paginate-cloned->contributions#onTablePaginateCloned',
                'contribution:row-clicked->contributions#openRowView',
                'datatable:row-deleted->contributions#onRowDeleted',
                'table-nav:step-row-view->contributions#stepRowView'].join(' ') }) do

          = render('contributions/table', company:)
