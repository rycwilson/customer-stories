#promote.tab-pane {
  class=('active' if workflow_stage == 'promote')
  data-dashboard-target="tabPanel"
  data-action="promoted-stories:loading->dashboard#onResourceLoading promoted-stories:ready->dashboard#onResourceReady"
  role="tabpanel" }

  = render('shared/loading_spinner')

  .container-fluid
    .sidebar--sans-text
      ul.nav data-controller="nav-list"
        li class=('active' if active_tab == '#promoted-stories')
          a {
            href="#promoted-stories"
            data-toggle="tab"
            data-action="dashboard#setNavCookie"
            data-controller="tooltip"
            data-tooltip-options-value=nav_link_tooltip_options('Promoted Stories').to_json
            aria-controls="promoted-stories"
            aria-expanded="#{active_tab == '#promoted-stories' ? 'true' : 'false'}"
            role="tab" }
            i.fa.fa-fw.fa-bullhorn
        li class=('active' if active_tab == '#promote-settings')
          a {
            href="#promote-settings"
            data-toggle="tab"
            data-action="dashboard#setNavCookie"
            data-controller="tooltip"
            data-tooltip-options-value=nav_link_tooltip_options('Promoted Stories Settings').to_json
            aria-controls="promote-settings"
            aria-expanded="#{active_tab == '#promote-settings' ? 'true' : 'false'}"
            role="tab" }
            i.fa.fa-fw.fa-gear
      /- if current_user.admin?
        .admin-sidebar
          h4.text-danger Admin
          p The connection to Google Ads is presently disabled.
          #gads-set-reset.text-center
            button.btn.btn-secondary.disabled {
              type="button" 
              disabled=""
              data-action="/companies/#{company.id}/set_reset_gads" }
              span Set/Reset
              i.fa.fa-spin.fa-circle-o-notch style="display:none"
          div style="opacity: 0.5"
            label Checklist
            ul#gads-checklist
              li 
                | company.promote_tr = true
              li 
                | default headline
              li
                | default images w/ valid asset_id
            #gads-results__wrapper
              label Results
              ul#gads-results

    .layout-main
      .tab-content
      
        = content_tag( \
            :div,
            id: 'promoted-stories',
            class: "tab-pane resource-ctrl #{'active' if active_tab == '#promoted-stories'}",
            aria_labelledby: 'promoted-stories-tab',
            role: 'tabpanel',
            data: { \
              dashboard_target: 'promotedStories',
              resource_name: 'promotedStories',
              controller: 'promoted-stories',
              promoted_stories_dashboard_outlet: '.dashboard',
              promoted_stories_data_path_value: company_adwords_ads_path(company),
              promoted_stories_row_group_data_source_value: @row_group_data_source[:promoted_stories],
              promoted_stories_filters_value: { 'curator': curator&.id },
              promoted_stories_display_options_html_value: promoted_stories_display_options_html(company) }) do

          table#promoted-stories-table.table {
            data-promoted-stories-target="datatable"
            data-controller="datatable"
            data-datatable-promoted-stories-outlet="#promoted-stories"
            data-promote-tr="#{company.promote_tr}" }

            = render( \
                'companies/shared/table_controls',
                { company:, 
                  caption: 'Promoted Stories',
                  resource_name: 'promotedStories',
                  resource_ctrl_id: 'promoted-stories',
                  search_options: { 'Customer' => company.customers.map(&:select_option) } })

            thead
              tr
                th
                  i.fa.fa-bullhorn
                th.customer Customer
                th.story-title Story Title
                th.status Status
                th Curator
                th

        #promote-settings.tab-pane class=('active' if active_tab == '#promote-settings')
          = render('companies/dashboard/gads_form', { company:, active_collection: 'images' })